(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{192:function(e,t,a){},193:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(64),i=a.n(r),o=(a(192),a(193),a(179)),s=a(18),l=a(84),j=a(111),d=a(116),p=a(17),u=a(183),h=a(357),b=a(358),f=a(176),m=a(177),O=a(75),g=a(72),x=a(359),y=a(162),v=a.n(y).a.create({baseURL:"https://opendata.resas-portal.go.jp/api/v1/"}),K=function(){var e=String("#".concat(Math.random().toString(16).slice(2,8).toUpperCase())).replace(/[^0-9a-f]/gi,"");e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t,a,n="#";for(a=0;a<3;a+=1)t=parseInt(e.substr(2*a,2),16),t=Math.round(Math.min(Math.max(0,t+-.25*t),255)).toString(16),n+="00".concat(t).substr(t.length);return n},S=a(8),N=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),i=Object(p.a)(r,2),o=i[0],s=i[1];Object(n.useEffect)((function(){localStorage.getItem("apiKey")||(window.location.href="/"),v.get("prefectures",{headers:{"X-API-KEY":localStorage.getItem("apiKey")}}).then((function(e){if(console.log(e),e.data.message)alert("API\u30ad\u30fc\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093"),localStorage.removeItem("apiKey"),window.location.href="/";else{var t=e.data.result;t.forEach((function(e){e.selected=!1})),c(t)}})).catch((function(e){return console.log(e)}))}),[]);var y=function(e){v.get("population/composition/perYear?cityCode=-&prefCode=".concat(e.prefCode),{headers:{"X-API-KEY":localStorage.getItem("apiKey")}}).then((function(t){var a=t.data.result.data.find((function(e){return"\u7dcf\u4eba\u53e3"===e.label})).data;a.sort((function(e,t){return e.year-t.year})),function(e,t){for(var a=Object(d.a)(o),n=0;n<t.length;n+=1)a[n]=Object(j.a)(Object(j.a)({},a[n]),{},Object(l.a)({year:t[n].year},e.prefName,t[n].value));s(a)}(e,a)})).catch((function(e){return console.log(e)}))},N=a.map((function(e){return Object(S.jsx)("div",{className:"app-prefecture-item",children:Object(S.jsxs)("label",{htmlFor:e.prefCode,children:[Object(S.jsx)("input",{type:"checkbox",name:e.prefName,id:e.prefCode,onClick:function(){return function(e){var t=a.find((function(t){return t===e}));if(t.selected=!t.selected,t.selected)y(t);else{var n=Object(d.a)(o);n.forEach((function(e){return delete e[t.prefName]})),s(n)}}(e)}}),e.prefName]})},e.prefCode)})),C=a.filter((function(e){return e.selected})).map((function(e){return Object(S.jsx)(u.a,{type:"monotone",dataKey:e.prefName,stroke:K()},e.prefCode)})),w=Object(S.jsxs)(h.a,{data:o,margin:{top:40,bottom:40,left:40,right:40},children:[C,Object(S.jsx)(b.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(S.jsx)(f.a,{padding:{right:60},dataKey:"year",label:{value:"\u5e74\u5ea6",position:"insideBottomRight"}}),Object(S.jsx)(m.a,{padding:{top:40},label:{value:"\u4eba\u53e3\u6570",position:"insideTopLeft"}}),Object(S.jsx)(O.a,{}),Object(S.jsx)(g.a,{verticalAlign:"top",align:"right",layout:"vertical"})]});return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h1",{className:"app-title",children:"\u90fd\u9053\u5e9c\u770c\u306e\u4eba\u53e3\u6570"}),Object(S.jsx)("h2",{children:"\u90fd\u9053\u5e9c\u770c"}),Object(S.jsx)("div",{className:"app-prefecture-list",children:N}),a.find((function(e){return e.selected}))?Object(S.jsx)("div",{className:"app-linechart",children:Object(S.jsx)(x.a,{width:"100%",height:"100%",children:w})}):Object(S.jsx)("div",{style:{fontStyle:"italic"},children:"*\u90fd\u9053\u5e9c\u770c\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002*"})]})},C=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(p.a)(r,2),o=i[0],s=i[1];return Object(S.jsx)("div",{className:"app-key-page",children:Object(S.jsx)("div",{className:"app-key-card",children:Object(S.jsxs)("form",{className:"app-form",onSubmit:function(e){return t=a,e.preventDefault(),localStorage.setItem("apiKey",t),void(window.location.href="/home");var t},children:[Object(S.jsxs)("label",{htmlFor:"apiKey",children:[Object(S.jsx)("h3",{children:"Enter your API Key"}),Object(S.jsx)("input",{type:o?"text":"password",name:"apiKey",id:"apiKey",size:"30",minLength:"12",onChange:function(e){return c(e.target.value)},required:!0})]}),Object(S.jsxs)("label",{className:"app-form-checkbox",htmlFor:"showKey",children:[Object(S.jsx)("input",{type:"checkbox",name:"showKey",id:"showKey",onClick:function(){return s(!o)}}),"Show your API Key"]}),Object(S.jsx)("button",{className:"app-form-btn",type:"submit",children:"Check"})]})})})};var w=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(o.a,{children:Object(S.jsxs)(s.c,{children:[Object(S.jsx)(s.a,{exact:!0,path:"/",children:Object(S.jsx)(C,{})}),Object(S.jsx)(s.a,{path:"/home",children:Object(S.jsx)(N,{})})]})})})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,361)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};i.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(w,{})}),document.getElementById("root")),k()}},[[352,1,2]]]);
//# sourceMappingURL=main.f71a1f33.chunk.js.map